# День 06 - Улучшение пользовательского опыта

## _Добавление новой бизнес-функции в модель данных_

**Описание:** Проектирование и реализация системы персональных скидок с обеспечением целостности данных.

## Изученные концепции

**Проектирование БД:**
- Логическая vs физическая модель
- Три этапа создания дизайна: концептуальное, логическое, физическое моделирование

**Data Governance:**
- Комментирование объектов БД
- Политики управления данными

## Выполненные задания

- **00**: Создание таблицы person_discounts с правильными ограничениями
- **01**: Заполнение таблицы скидок на основе количества заказов (1→10.5%, 2→22%, 3+→30%)
- **02**: Запрос для отображения цен с применением персональных скидок
- **03**: Создание уникального индекса idx_person_discounts_unique
- **04**: Добавление ограничений NOT NULL и CHECK для валидации данных
- **05**: Добавление комментариев для таблицы и столбцов (Data Governance)
- **06**: Создание последовательности seq_person_discounts для автогенерации ID

**Бизнес-логика скидок:**
```sql
CASE 
    WHEN COUNT(*) = 1 THEN 10.5
    WHEN COUNT(*) = 2 THEN 22
    ELSE 30
END
```

## Технологии

- PostgreSQL
- SQL (DML, DDL)
- SEQUENCE, ограничения, индексы
- ROW_NUMBER() оконная функция